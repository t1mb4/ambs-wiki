
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<!-- Mirrored from 78.46.73.113/wiki/wakka.php?wakka=PrimeryRabotySipStudioAmbs/PerenosAMBS&v=fou by HTTrack Website Copier/3.x [XR&CO'2006], Wed, 25 Jul 2012 16:10:12 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=windows-1251"><!-- /Added by HTTrack -->
<head>
  <title>
  	IpstudioWiki : Примеры&nbsp;Работы&nbsp;Сip&nbsp;Studio&nbsp;Ambs&nbsp;/&nbsp;Перенос&nbsp;AMBS  </title>
			  <meta name="keywords" content="" />
  <meta name="description" content="" />
  <meta http-equiv="content-type" content="text/html; charset=windows-1251" />
  <link rel="stylesheet" type="text/css" href="themes/default/css/wakka.css" />
  <link rel="shortcut icon" href="themes/default/icons/wacko.ico" type="image/x-icon" />
  <link rel="alternate" type="application/rss+xml" title="RecentChanges in RSS" href="xml/recentchanges_ipstudiowiki.xml" />
  <link rel="alternate" type="application/rss+xml" title="History/revisions of ПримерыРаботыСipStudioAmbs/ПереносAMBS in RSS" href="wakka1f63.php?wakka=PrimeryRabotySipStudioAmbs/PerenosAMBS/revisions.xml" />

<script language="JavaScript" type="text/javascript" src="js/default.js"></script>
<script language="JavaScript" type="text/javascript" src="js/protoedit.js"></script>
<script language="JavaScript" type="text/javascript" src="js/wikiedit2.js"></script>

</head>

<body onload="all_init();" leftmargin="0" topmargin="0" rightmargin="0" bottommargin="0">

<table width="100%" height="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td>

<form action="http://78.46.73.113/wiki/wakka.php?wakka=Login"  method="post" >
<input type="hidden" name="wakka" value="Login" />
<input type="hidden" name="action" value="login" />
<div class="header">
  <table width="100%" height="100%" border="0" cellspacing="0" cellpadding="0">
  	<tr>
  		<td align="left" class="logo_header">
  		
  		</td>
  		<td align="right" valign="top" class="logo_header"> 
								<span>
					<a href="wakka6b42.html?wakka=Login">
						<b>Вход</b>
					</a>
				</span>
				<!-- <span class="nobr"><input type="hidden" name="goback" value="PrimeryRabotySipStudioAmbs/PerenosAMBS" 
				/><strong>Вход:&nbsp;</strong><input 
				type="text" name="name" size="18" class="login" />&nbsp;Пароль:&nbsp;<input type="password" name="password"  
				class="login" size="8" />&nbsp;<input type="image" 
				src="http://78.46.73.113/wiki/themes/default/icons/login.gif" alt=">>>" align="top" /></span>-->
							</td>
		</tr>
		<tr>
			<td colspan="2" class="bookmarks">
							</td>
		</tr>
		<tr>
			<td colspan="2" class="logo_header">
				<b>
				<!--     <span class="main">IpstudioWiki:</span> -->
				     <span class="main"><a href="wakkad0e2.html?wakka=KnowledgeBase">Knowledge&nbsp;Base</a></span>
								     <span class="main">:: <a  href="wakka2c0b.html?wakka=PrimeryRabotySipStudioAmbs&amp;v=1c1f" class="" title="Примеры&nbsp;Работы&nbsp;Сip&nbsp;Studio&nbsp;Ambs">ПримерыРаботыСipStudioAmbs</a>/ПереносAMBS</span>     
								</b>
				<!--     <span class="main"><a class="Search" title="" 
				     href="http://78.46.73.113/wiki/wakka.php?wakka=TextSearch&amp;phrase=%CF%F0%E8%EC%E5%F0%FB%D0%E0%E1%EE%F2%FB%D1ipStudioAmbs%2F%CF%E5%F0%E5%ED%EE%F1AMBS">...</a></span> -->
				</td>
			</tr>
		</table>
</form>

<div class="pageBefore">
	<img src="images/z.gif" width="1" height="1" border="0" alt="" style="display:block" align="top" />
</div><div class="page">
<a name="p-1350-1"></a><p class="auto" id="p-1350-1"><strong> <a name=".." href="wakka2c0b.html?wakka=PrimeryRabotySipStudioAmbs&amp;v=1c1f" class="" title="ПримерыРаботыСipStudioAmbs/..">В оглавление</a> </strong></p><a name="h101-1"></a><h2>Перенос IP&nbsp;Studio AMBS на&nbsp;другой сервер</h2>
<br /><a name="p-1350-2"></a><p class="auto" id="p-1350-2">
<strong>Задача</strong>: Нужно перенести АМБС на&nbsp;другой сервер с&nbsp;другим IP-адресом.</p><br /><a name="p-1350-3"></a><p class="auto" id="p-1350-3">
<strong>Решение</strong>: </p><br /><a name="p-1350-4"></a><p class="auto" id="p-1350-4">
<strong>Обязательные условия</strong>: </p><ul><li> На&nbsp;новом сервере должна стоят ОС&nbsp;аналогичная установленной на&nbsp;старом сервере.
</li><li> На&nbsp;новом сервер должен быть установлен GCC&nbsp;(модуль разработки).</li></ul>
<br /><a name="p-1350-5"></a><p class="auto" id="p-1350-5">
<strong>1.</strong> Отправить письмо с&nbsp;уведомлением в&nbsp;тех.поддержку &#147;IP Studio&#148;, о&nbsp;планируемом переносе системы на&nbsp;новый сервер, с&nbsp;указанием старого и&nbsp;нового адресов.</p><br /><a name="p-1350-6"></a><p class="auto" id="p-1350-6">
<strong>2.</strong> Получить новую лицензию, на&nbsp;новый IP-адрес.</p><br /><a name="p-1350-7"></a><p class="auto" id="p-1350-7">
<strong>3.</strong> Проверить размер папки &laquo;/usr/local/billing&raquo;, найти достаточно места, чтобы создать архив этой папки для&nbsp;переноса на&nbsp;новый сервер.</p><br /><a name="p-1350-8"></a><p class="auto" id="p-1350-8">
4. Выбрать время с&nbsp;минимальной загрузкой работы, останавить все&nbsp;процессы АМБС. </p><br /><a name="p-1350-9"></a><p class="auto" id="p-1350-9">
<strong>5.</strong> Проверить, что&nbsp;все процессы АМБС остановлены.</p><br /><a name="p-1350-10"></a><p class="auto" id="p-1350-10">
<strong>6.</strong> Сделать архив папки &laquo;/usr/local/billing/&raquo;.</p><br /><a name="p-1350-11"></a><p class="auto" id="p-1350-11">
<strong>7.</strong> Запустить процессы АМБС, чтобы старый сервер продолжал маршрутизировать звонки.</p><br /><a name="p-1350-12"></a><p class="auto" id="p-1350-12">
<strong>8.</strong> Перенести архив папки АМБС на&nbsp;новый сервер.</p><br /><a name="p-1350-13"></a><p class="auto" id="p-1350-13">
<strong>9.</strong> Распаковать архив на&nbsp;новом сервере в&nbsp;аналогичную папку(/usr/local/billing).</p><br /><a name="p-1350-14"></a><p class="auto" id="p-1350-14">
<strong>10.</strong> Проделать все&nbsp;шаги, необходимые для&nbsp;установки АМБС на&nbsp;новый сервер из&nbsp;<u><a name=".dokumentacijaipstudioambs.ustanovkanastrojjkaipstudioambs.ustanovkabinarnogodistributiva" href="wakka4e86.html?wakka=DokumentacijaIPStudioAMBS/UstanovkaNastrojjkaIPStudioAMBS/UstanovkaBinarnogoDistributiva&amp;v=143h" class="" title="Документация&nbsp;IP&nbsp;Studio&nbsp;AMBS&nbsp;/&nbsp;Установка&nbsp;Настройка&nbsp;IP&nbsp;Studio&nbsp;AMBS&nbsp;/&nbsp;Установка&nbsp;Бинарного&nbsp;Дистрибутива">Инструкции по&nbsp;установке АМБС</a></u>.<br />
(создать пользователя, поправить конфигурационные файлы, добавить команды в&nbsp;крон и&nbsp;т.д.).</p><br /><a name="p-1350-15"></a><p class="auto" id="p-1350-15">
<strong>11.</strong> Положить файлы новой лицензии на&nbsp;новом сервере в&nbsp;папку &laquo;/usr/local/billing/var/&raquo;.</p><br /><a name="p-1350-16"></a><p class="auto" id="p-1350-16">
<strong>12.</strong> Настроить sftp-соединения с&nbsp;удаленными MVTS-серверами без&nbsp;аутентификации по&nbsp;<u><a name=".dokumentacijaipstudioambs.razdelequipments.formamvtsservers.instrukcijasftp" href="wakkacd5b.html?wakka=DokumentacijaIPStudioAMBS/RazdelEquipments/FormaMvtsServers/InstrukcijaSftp&amp;v=lyc" class="" title="Документация&nbsp;IP&nbsp;Studio&nbsp;AMBS&nbsp;/&nbsp;Раздел&nbsp;Equipments&nbsp;/&nbsp;Форма&nbsp;Mvts&nbsp;Servers&nbsp;/&nbsp;Инструкция&nbsp;Sftp">Инструкции настройки sftp</a></u>.</p><br /><a name="p-1350-17"></a><p class="auto" id="p-1350-17">
<strong>13.</strong> Если на&nbsp;новом сервере нет&nbsp;необходимости запускать отдельный <!--notypo-->MySql<!--/notypo-->-сервер, тогда проверить наличие файла &laquo;/etc/my.cnf&raquo; и&nbsp;если такой есть, удалить его&nbsp;или переименовать в&nbsp;&#147;my.cnf.old&#148;. </p><br /><a name="p-1350-18"></a><p class="auto" id="p-1350-18">
<strong>14.</strong> Запустить АМБС на&nbsp;новом сервере.</p><br /><a name="p-1350-19"></a><p class="auto" id="p-1350-19">
<strong>15.</strong> Проверить <u><a name=".dokumentacijaipstudioambs.ustanovkanastrojjkaipstudioambs.proverkaprocessovambs" href="wakkaf2f1.html?wakka=DokumentacijaIPStudioAMBS/UstanovkaNastrojjkaIPStudioAMBS/ProverkaProcessovAMBS&amp;v=1asm" class="" title="Документация&nbsp;IP&nbsp;Studio&nbsp;AMBS&nbsp;/&nbsp;Установка&nbsp;Настройка&nbsp;IP&nbsp;Studio&nbsp;AMBS&nbsp;/&nbsp;Проверка&nbsp;Процессов&nbsp;AMBS">процессы АМБС</a></u> и&nbsp;<u><a name=".primeryrabotysipstudioambs.logiambs" href="wakka65c7.html?wakka=PrimeryRabotySipStudioAmbs/LogiAMBS&amp;v=hn6" class="" title="Примеры&nbsp;Работы&nbsp;Сip&nbsp;Studio&nbsp;Ambs&nbsp;/&nbsp;Логи&nbsp;AMBS">логи</a></u> на&nbsp;предмет критических ошибок.</p><br /><a name="p-1350-20"></a><p class="auto" id="p-1350-20">
<strong>16.</strong> Если процесс запуска прошел без&nbsp;проблем, остановить АМБС на&nbsp;старом сервере.</p><br /><a name="p-1350-21"></a><p class="auto" id="p-1350-21">
<strong>17.</strong> Изменить конфигурационные файлы MVTS-серверов, перенастроить их&nbsp;на новый IP-адрес радиуса АМБС.</p><br /><a name="p-1350-22"></a><p class="auto" id="p-1350-22">
<strong>18.</strong> Изменить конфигурационные файлы АМБС на&nbsp;серверах MVTS, перенастроить их&nbsp;на новый IP-адрес базы АМБС. </p><br /><a name="p-1350-23"></a><p class="auto" id="p-1350-23">
<strong>19.</strong> Перезапустить удаленные MVTS (обновить конфигурационные файлы).</p><br /><a name="p-1350-24"></a><p class="auto" id="p-1350-24">
<strong>20</strong>. Сбросить и&nbsp;перезапустить процесс &#147;bill_sig_svr.pl&#148; на&nbsp;удаленных MVTS-серверах.</p><br /><a name="p-1350-25"></a><p class="auto" id="p-1350-25">
<strong>21.</strong> Проверить работу, прохождение трафика по&nbsp;cdr-ам MVTS-серверов и&nbsp;логам радиуса с&nbsp;использованием нового сервера.</p><br /><a name="p-1350-26"></a><p class="auto" id="p-1350-26">
<strong>22</strong>. Изменить файл &laquo;/usr/local/billing/lastupdated&raquo; на&nbsp;удаленных MVTS-серверах на&nbsp;дату начала переноса АМБС.</p><br /><a name="p-1350-27"></a><p class="auto" id="p-1350-27">
<strong>23.</strong> Дождаться завершения процесса парсинга cdr-ов на&nbsp;новом сервере АМБС(можно провести в&nbsp;ручную).</p><br /><a name="p-1350-28"></a><p class="auto" id="p-1350-28">
<strong>24.</strong> Удалить директорию &laquo;/usr/local/billing/&raquo; на&nbsp;старом сервере АМБС.</p><br /><a name="p-1350-29"></a><p class="auto" id="p-1350-29">
Процесс переноса завершен.</p><br /><a name="p-1350-30"></a><p class="auto" id="p-1350-30">
<strong> <a  href="wakka2c0b.html?wakka=PrimeryRabotySipStudioAmbs&amp;v=1c1f" class="" title="ПримерыРаботыСipStudioAmbs/..">В оглавление</a> </strong></p>   <script language="JavaScript" type="text/javascript">
   var dbclick = "page";
  </script>
 <br style="clear:both" />&nbsp;
</div>

<form action="http://78.46.73.113/wiki/wakka.php?wakka=TextSearch"  method="get" >
<input type="hidden" name="wakka" value="TextSearch" />
<table width="100%" border="0" cellspacing="0" cellpadding="0" class="footer">
	<tr>
		<td>
			 
			
			  <span class="searchbar nobr">Поиск: <input type="text" name="phrase" size="25" style="border: none; border-bottom: 1px solid #CCCCAA; padding: 0px; margin: 0px;" /></span>
		</td>
		<td align="right">
			<a href="wakka8207.html?wakka=PrimeryRabotySipStudioAmbs/PerenosAMBS/print" target="_new"><img src="themes/default/icons/1print.gif" title="Версия для печати" alt="Версия для печати"  align="middle" border="0" /></a>		</td>
	</tr>
</table>

</form>


<table class="copyright" width="100%" height="100%" border="0" cellspacing="0" cellpadding="0">
	<tr>
		<td align="left" class="copyright">
			Created by <a target="_blank" class="copyright" href="http://www.ipstudio.net/">IP Studio Inc.</a>© 2007
		</td>
		<td align="right" class="copyright">
			Powered by <a href="http://wackowiki.com/WackoWiki" target="_blank" title="" class="outerlink">WackoWiki R4.2</a>		</td>
	</tr>
</table>

</td>
</tr>
</table>
</body>
<!-- Mirrored from 78.46.73.113/wiki/wakka.php?wakka=PrimeryRabotySipStudioAmbs/PerenosAMBS&v=fou by HTTrack Website Copier/3.x [XR&CO'2006], Wed, 25 Jul 2012 16:10:14 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=windows-1251"><!-- /Added by HTTrack -->
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<!-- Mirrored from 78.46.73.113/wiki/wakka.php?wakka=PrimeryRabotySipStudioAmbs/NetarifikacijaZvonka/PrimerReshenija&v=vh7 by HTTrack Website Copier/3.x [XR&CO'2006], Wed, 25 Jul 2012 16:09:09 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=windows-1251"><!-- /Added by HTTrack -->
<head>
  <title>
  	IpstudioWiki : Примеры&nbsp;Работы&nbsp;Сip&nbsp;Studio&nbsp;Ambs&nbsp;/&nbsp;Нетарификация&nbsp;Звонка&nbsp;/&nbsp;Пример&nbsp;Решения  </title>
			  <meta name="keywords" content="" />
  <meta name="description" content="" />
  <meta http-equiv="content-type" content="text/html; charset=windows-1251" />
  <link rel="stylesheet" type="text/css" href="themes/default/css/wakka.css" />
  <link rel="shortcut icon" href="themes/default/icons/wacko.ico" type="image/x-icon" />
  <link rel="alternate" type="application/rss+xml" title="RecentChanges in RSS" href="xml/recentchanges_ipstudiowiki.xml" />
  <link rel="alternate" type="application/rss+xml" title="History/revisions of ПримерыРаботыСipStudioAmbs/НетарификацияЗвонка/ПримерРешения in RSS" href="wakkaf502.php?wakka=PrimeryRabotySipStudioAmbs/NetarifikacijaZvonka/PrimerReshenija/revisions.xml" />

<script language="JavaScript" type="text/javascript" src="js/default.js"></script>
<script language="JavaScript" type="text/javascript" src="js/protoedit.js"></script>
<script language="JavaScript" type="text/javascript" src="js/wikiedit2.js"></script>

</head>

<body onload="all_init();" leftmargin="0" topmargin="0" rightmargin="0" bottommargin="0">

<table width="100%" height="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td>

<form action="http://78.46.73.113/wiki/wakka.php?wakka=Login"  method="post" >
<input type="hidden" name="wakka" value="Login" />
<input type="hidden" name="action" value="login" />
<div class="header">
  <table width="100%" height="100%" border="0" cellspacing="0" cellpadding="0">
  	<tr>
  		<td align="left" class="logo_header">
  		
  		</td>
  		<td align="right" valign="top" class="logo_header"> 
								<span>
					<a href="wakka6b42.html?wakka=Login">
						<b>Вход</b>
					</a>
				</span>
				<!-- <span class="nobr"><input type="hidden" name="goback" value="PrimeryRabotySipStudioAmbs/NetarifikacijaZvonka/PrimerReshenija" 
				/><strong>Вход:&nbsp;</strong><input 
				type="text" name="name" size="18" class="login" />&nbsp;Пароль:&nbsp;<input type="password" name="password"  
				class="login" size="8" />&nbsp;<input type="image" 
				src="http://78.46.73.113/wiki/themes/default/icons/login.gif" alt=">>>" align="top" /></span>-->
							</td>
		</tr>
		<tr>
			<td colspan="2" class="bookmarks">
							</td>
		</tr>
		<tr>
			<td colspan="2" class="logo_header">
				<b>
				<!--     <span class="main">IpstudioWiki:</span> -->
				     <span class="main"><a href="wakkad0e2.html?wakka=KnowledgeBase">Knowledge&nbsp;Base</a></span>
								     <span class="main">:: <a  href="wakka2c0b.html?wakka=PrimeryRabotySipStudioAmbs&amp;v=1c1f" class="" title="Примеры&nbsp;Работы&nbsp;Сip&nbsp;Studio&nbsp;Ambs">ПримерыРаботыСipStudioAmbs</a>/<a  href="wakka6910.html?wakka=PrimeryRabotySipStudioAmbs/NetarifikacijaZvonka&amp;v=jz9" class="" title="Примеры&nbsp;Работы&nbsp;Сip&nbsp;Studio&nbsp;Ambs&nbsp;/&nbsp;Нетарификация&nbsp;Звонка">НетарификацияЗвонка</a>/ПримерРешения</span>     
								</b>
				<!--     <span class="main"><a class="Search" title="" 
				     href="http://78.46.73.113/wiki/wakka.php?wakka=TextSearch&amp;phrase=%CF%F0%E8%EC%E5%F0%FB%D0%E0%E1%EE%F2%FB%D1ipStudioAmbs%2F%CD%E5%F2%E0%F0%E8%F4%E8%EA%E0%F6%E8%FF%C7%E2%EE%ED%EA%E0%2F%CF%F0%E8%EC%E5%F0%D0%E5%F8%E5%ED%E8%FF">...</a></span> -->
				</td>
			</tr>
		</table>
</form>

<div class="pageBefore">
	<img src="images/z.gif" width="1" height="1" border="0" alt="" style="display:block" align="top" />
</div><div class="page">
<a name="p-9076-1"></a><p class="auto" id="p-9076-1"><strong> <a name=".." href="wakka6910.html?wakka=PrimeryRabotySipStudioAmbs/NetarifikacijaZvonka&amp;v=jz9" class="" title="ПримерыРаботыСipStudioAmbs/НетарификацияЗвонка/..">В оглавление</a> </strong></p><a name="h229-1"></a><h2>Пример решения не&nbsp;тарификации звонков</h2>
<br /><a name="p-9076-2"></a><p class="auto" id="p-9076-2">
Рассмотрим рабочую ситуацию, есть 2 компании использующие один шлюз. Одна компания занимается оригинацией трафика другая терминацией.<br />
Был&nbsp;добавлен один шлюз двум операторам в&nbsp;режиме 3(оригинация и&nbsp;терминация). У&nbsp;одного из&nbsp;операторов была добавлена трансляция. <br />
В&nbsp;результате получаем, что&nbsp;иногда звонки отбиваются на&nbsp;входе и&nbsp;иногда прошедшие звонки не&nbsp;ассоциируются с&nbsp;оператором.</p><br />
<div style="float:center; text-align:center"><img src="./files/uncalc_sample.jpg" alt=" (48&nbsp;Кб)" title=" (48&nbsp;Кб)" width='1090' height='63' /></div><br /><a name="p-9076-3"></a><p class="auto" id="p-9076-3">
Проверяем каким операторам принадлежит в&nbsp;системе шлюз &#147;192.168.0.20&#148; с&nbsp;помощью формы &laquo;Отчет по&nbsp;операторам&raquo;.<br />
Из&nbsp;результата видно, что&nbsp;шлюз как&nbsp;и&nbsp;планировалось заведен двум операторам оригинатору и&nbsp;терминатору. </p><br />
<div style="float:center; text-align:center"><img src="./files/uncalc_chk.jpg" alt=" (126&nbsp;Кб)" title=" (126&nbsp;Кб)" width='466' height='347' /></div><br /><a name="p-9076-4"></a><p class="auto" id="p-9076-4">
Теперь нужно рассмотреть как&nbsp;эти шлюзы заведены у&nbsp;операторов. <br />
У&nbsp;терминирующего оператора на&nbsp;шлюзе нет&nbsp;трансляций.</p><br />
<div style="float:center; text-align:center"><img src="./files/uncalc_term_info.jpg" alt=" (183&nbsp;Кб)" title=" (183&nbsp;Кб)" width='655' height='424' /></div><br /><a name="p-9076-5"></a><p class="auto" id="p-9076-5">
У&nbsp;оригинирующего оператора присутствует пустая трансляция.</p><br />
<div style="float:center; text-align:center"><img src="./files/uncalc_orig_info.jpg" alt=" (184&nbsp;Кб)" title=" (184&nbsp;Кб)" width='653' height='424' /></div><br />
<div class="action"><div class="action-content"><table class="dtable" border="0">
<tr class="userrow"><td class="usercell"><strong>Замечание:</strong></td><td  class="usercell"> Нельзя использовать пустые трансляции. При&nbsp;маршрутизации входящего звонка система ищет сайт, где&nbsp;заведен этот шлюз и&nbsp;проверяет трансляции шлюза. Тот&nbsp;сайт, где&nbsp;входящий звонок удовлетворяет правилам трансляции будет выбран как&nbsp;сайт оригинатора. После выбора сайта, на&nbsp;этом сайте ищется тарифный план, по&nbsp;которому будет производиться тарификация звонка. Точно также происходит и&nbsp;с выбором терминирующего оператора.</td></tr>
</table></div></div> <br /><a name="p-9076-6"></a><p class="auto" id="p-9076-6">
В&nbsp;рассматриваемом примере входящий звонок может быть принят и&nbsp;на сайт оригинатора и&nbsp;на сайт терминатора (поскольку по&nbsp;правилам трансляции может пройти на&nbsp;оба сайта), но&nbsp;на сайте терминатора он&nbsp;будет отбит, поскольку нет&nbsp;тарифного плана оригинации. Точно такая же&nbsp;картина происходит и&nbsp;с терминацией, когда звонок отправляется на&nbsp;рассматриваемого терминирующего оператора система может занести его&nbsp;оригинатору и&nbsp;непротарифицировать.</p><br /><a name="p-9076-7"></a><p class="auto" id="p-9076-7">
Для&nbsp;того чтобы исправить сложившуюся ситуацию нужно более точно указать правила трансляции. С&nbsp;сайта оригинации нам&nbsp;нужно получать трафик без&nbsp;трансляций, но&nbsp;отправлять трафик с&nbsp;этого сайта не&nbsp;нужно. Исходя из&nbsp;этого условия, мы&nbsp;можем добавить &laquo;вымышленную трансляцию&raquo; на&nbsp;отправку трафика с&nbsp;этого сайта. Трансляцию на&nbsp;прием трафика с&nbsp;этого сайта трогать не&nbsp;будем, трафик идет без&nbsp;трансляций.</p><br />
<div style="float:center; text-align:center"><img src="./files/uncalc_orig_corr.jpg" alt=" (184&nbsp;Кб)" title=" (184&nbsp;Кб)" width='653' height='424' /></div><br /><a name="p-9076-8"></a><p class="auto" id="p-9076-8">
На&nbsp;сайте терминирующего оператора работает с&nbsp;точностью до&nbsp;наоборот правило. Принимать трафик не&nbsp;нужно, отправлять трафик без&nbsp;трансляций. Таким образом можно добавить &laquo;вымышленную трансляцию&raquo; на&nbsp;прием трафика и&nbsp;не трогать отправку. </p><br />
<div style="float:center; text-align:center"><img src="./files/uncalc_orig_corr.jpg" alt=" (184&nbsp;Кб)" title=" (184&nbsp;Кб)" width='653' height='424' /></div><br /><a name="p-9076-9"></a><p class="auto" id="p-9076-9">
После перетарификации с&nbsp;ретрансляцией номеров уже&nbsp;прошедшего трафика приведенный выше пример будет исправлен, будет точно определен терминирующий оператор, поскольку не&nbsp;будет других вариантов куда отнести звонок. Также прекратятся проблемы с&nbsp;отбоем звонков на&nbsp;входе, поскольку оригинирующей оператор всегда будет определяться точно.</p><br />
<div class="action"><div class="action-content"><table class="dtable" border="0">
<tr class="userrow"><td class="usercell"><strong>Замечание:</strong></td><td  class="usercell"> Если в&nbsp;будущем нужно будет изменить или&nbsp;добавить трансляции к&nbsp;шлюзам(клонам), нужно остановить текущий шлюз стоп-датой и&nbsp;добавить новый шлюз(клон) с&nbsp;новыми настройками. Это&nbsp;необходимо чтобы система могла всегда перетарифицировать прошедший ранее трафик. Если изменить рабочий вариант шлюза(клона) на&nbsp;новый, старый прошедший трафик останется без&nbsp;шлюза и&nbsp;будет показан как&nbsp;не&nbsp;калькулированный.</td></tr>
</table></div></div> <br /><a name="p-9076-10"></a><p class="auto" id="p-9076-10">
<strong> <a  href="wakka6910.html?wakka=PrimeryRabotySipStudioAmbs/NetarifikacijaZvonka&amp;v=jz9" class="" title="ПримерыРаботыСipStudioAmbs/НетарификацияЗвонка/..">В оглавление</a> </strong></p>   <script language="JavaScript" type="text/javascript">
   var dbclick = "page";
  </script>
 <br style="clear:both" />&nbsp;
</div>

<form action="http://78.46.73.113/wiki/wakka.php?wakka=TextSearch"  method="get" >
<input type="hidden" name="wakka" value="TextSearch" />
<table width="100%" border="0" cellspacing="0" cellpadding="0" class="footer">
	<tr>
		<td>
			 
			
			  <span class="searchbar nobr">Поиск: <input type="text" name="phrase" size="25" style="border: none; border-bottom: 1px solid #CCCCAA; padding: 0px; margin: 0px;" /></span>
		</td>
		<td align="right">
			<a href="wakka66a4.html?wakka=PrimeryRabotySipStudioAmbs/NetarifikacijaZvonka/PrimerReshenija/print" target="_new"><img src="themes/default/icons/1print.gif" title="Версия для печати" alt="Версия для печати"  align="middle" border="0" /></a>		</td>
	</tr>
</table>

</form>


<table class="copyright" width="100%" height="100%" border="0" cellspacing="0" cellpadding="0">
	<tr>
		<td align="left" class="copyright">
			Created by <a target="_blank" class="copyright" href="http://www.ipstudio.net/">IP Studio Inc.</a>© 2007
		</td>
		<td align="right" class="copyright">
			Powered by <a href="http://wackowiki.com/WackoWiki" target="_blank" title="" class="outerlink">WackoWiki R4.2</a>		</td>
	</tr>
</table>

</td>
</tr>
</table>
</body>
<!-- Mirrored from 78.46.73.113/wiki/wakka.php?wakka=PrimeryRabotySipStudioAmbs/NetarifikacijaZvonka/PrimerReshenija&v=vh7 by HTTrack Website Copier/3.x [XR&CO'2006], Wed, 25 Jul 2012 16:10:11 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=windows-1251"><!-- /Added by HTTrack -->
</html>